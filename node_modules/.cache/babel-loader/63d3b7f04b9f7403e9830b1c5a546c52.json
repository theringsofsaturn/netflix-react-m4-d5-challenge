{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emili\\\\Desktop\\\\netflix-react\\\\src\\\\components\\\\SingleMovie.jsx\";\nimport { Component } from \"react\";\nimport { Col, Modal, Form, InputGroup, FormControl, Button, Alert } from \"react-bootstrap\";\nimport CommentsList from \"./CommentsList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass SingleMovie extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selected: false,\n      comments: [],\n      error: false,\n      newComment: {\n        comment: \"\",\n        rate: \"3\",\n        elementId: this.props.data.imdbID\n      }\n    };\n\n    this.fetchComments = async movieID => {\n      const COMMENTS_URL = \"https://striveschool-api.herokuapp.com/api/comments/\";\n\n      try {\n        const response = await fetch(COMMENTS_URL + movieID, {\n          headers: {\n            Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTUwNmRlY2RhMzE2MzAwMTVkNTEyM2YiLCJpYXQiOjE2MzI2NjA5NzIsImV4cCI6MTYzMzg3MDU3Mn0.vzSXzuRnbhUs7NjBPeeIiCBg6REuTwnoXE-R7Y-zU9Y\"\n          }\n        });\n\n        if (response.ok) {\n          const comments = await response.json();\n          this.setState({\n            error: false,\n            comments\n          });\n        } else {\n          console.log(\"an error occurred\");\n          this.setState({\n            error: true\n          });\n        }\n      } catch (error) {\n        console.log(error);\n        this.setState({\n          error: true\n        });\n      }\n    };\n\n    this.submitComment = async e => {\n      e.preventDefault();\n      const COMMENTS_URL = \"https://striveschool-api.herokuapp.com/api/comments/\";\n\n      try {\n        const response = await fetch(COMMENTS_URL, {\n          method: \"POST\",\n          body: JSON.stringify(this.state.newComment),\n          headers: {\n            Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTUwNmRlY2RhMzE2MzAwMTVkNTEyM2YiLCJpYXQiOjE2MzI2NjA5NzIsImV4cCI6MTYzMzg3MDU3Mn0.vzSXzuRnbhUs7NjBPeeIiCBg6REuTwnoXE-R7Y-zU9Y\",\n            \"Content-Type\": \"application/json\"\n          }\n        });\n\n        if (response.ok) {\n          alert(\"Comment added\");\n          this.setState({\n            newComment: {\n              comment: \"\",\n              rate: 0,\n              elementId: this.props.data.imdbID\n            }\n          });\n        } else {\n          alert(\"An error has occurred\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.handleRadioChange = rating => {\n      let newComment = this.state.newComment;\n      newComment.rate = rating;\n      this.setState({\n        newComment\n      });\n    };\n\n    this.handleCommentText = e => {\n      let newComment = this.state.newComment;\n      newComment.comment = e.currentTarget.value;\n      this.setState({\n        newComment\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Col, {\n      className: \"mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"img-fluid\",\n        src: this.props.data.Poster,\n        alt: \"movie\",\n        onClick: () => {\n          this.setState({\n            selected: !this.state.selected\n          });\n          this.fetchComments(this.props.data.imdbID);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.selected,\n        onHide: () => this.setState({\n          selected: !this.state.selected\n        }),\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Movie comments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-3\",\n            children: [this.state.error && /*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"danger\",\n              className: \"text-center\",\n              children: \"Error fetching comments\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this), this.state.comments.length > 0 && this.state.comments[0].elementId === this.props.data.imdbID && /*#__PURE__*/_jsxDEV(CommentsList, {\n              comments: this.state.comments\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"my-3\",\n                children: \"Add a comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form, {\n                onSubmit: this.submitComment,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"my-3 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Check, {\n                    inline: true,\n                    label: \"1\",\n                    value: \"1\",\n                    type: \"radio\",\n                    name: \"rating\",\n                    defaultChecked: this.state.newComment.rate === \"1\",\n                    onClick: () => this.handleRadioChange(\"1\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                    inline: true,\n                    label: \"2\",\n                    value: \"2\",\n                    type: \"radio\",\n                    name: \"rating\",\n                    defaultChecked: this.state.newComment.rate === \"2\",\n                    onClick: () => this.handleRadioChange(\"2\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                    inline: true,\n                    label: \"3\",\n                    value: \"3\",\n                    type: \"radio\",\n                    name: \"rating\",\n                    defaultChecked: this.state.newComment.rate === \"3\",\n                    onClick: () => this.handleRadioChange(\"3\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                    inline: true,\n                    label: \"4\",\n                    value: \"4\",\n                    type: \"radio\",\n                    name: \"rating\",\n                    defaultChecked: this.state.newComment.rate === \"4\",\n                    onClick: () => this.handleRadioChange(\"4\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                    inline: true,\n                    label: \"5\",\n                    value: \"5\",\n                    type: \"radio\",\n                    name: \"rating\",\n                    defaultChecked: this.state.newComment.rate === \"5\",\n                    onClick: () => this.handleRadioChange(\"5\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n                  className: \"mb-3\",\n                  children: /*#__PURE__*/_jsxDEV(FormControl, {\n                    placeholder: \"Write your comment\",\n                    \"aria-label\": \"comment\",\n                    \"aria-describedby\": \"basic-addon1\",\n                    onChange: this.handleCommentText,\n                    value: this.state.newComment.comment,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  type: \"submit\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, this.props.data.imdbID, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default SingleMovie;","map":{"version":3,"sources":["C:/Users/emili/Desktop/netflix-react/src/components/SingleMovie.jsx"],"names":["Component","Col","Modal","Form","InputGroup","FormControl","Button","Alert","CommentsList","SingleMovie","state","selected","comments","error","newComment","comment","rate","elementId","props","data","imdbID","fetchComments","movieID","COMMENTS_URL","response","fetch","headers","Authorization","ok","json","setState","console","log","submitComment","e","preventDefault","method","body","JSON","stringify","alert","handleRadioChange","rating","handleCommentText","currentTarget","value","render","Poster","length"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport {\n  Col,\n  Modal,\n  Form,\n  InputGroup,\n  FormControl,\n  Button,\n  Alert,\n} from \"react-bootstrap\";\nimport CommentsList from \"./CommentsList\";\n\nclass SingleMovie extends Component {\n  state = {\n    selected: false,\n    comments: [],\n    error: false,\n    newComment: {\n      comment: \"\",\n      rate: \"3\",\n      elementId: this.props.data.imdbID,\n    },\n  };\n\n  fetchComments = async (movieID) => {\n    const COMMENTS_URL = \"https://striveschool-api.herokuapp.com/api/comments/\";\n    try {\n      const response = await fetch(COMMENTS_URL + movieID, {\n        headers: {\n          Authorization:\n            \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTUwNmRlY2RhMzE2MzAwMTVkNTEyM2YiLCJpYXQiOjE2MzI2NjA5NzIsImV4cCI6MTYzMzg3MDU3Mn0.vzSXzuRnbhUs7NjBPeeIiCBg6REuTwnoXE-R7Y-zU9Y\",\n        },\n      });\n      if (response.ok) {\n        const comments = await response.json();\n        this.setState({ error: false, comments });\n      } else {\n        console.log(\"an error occurred\");\n        this.setState({ error: true });\n      }\n    } catch (error) {\n      console.log(error);\n      this.setState({ error: true });\n    }\n  };\n\n  submitComment = async (e) => {\n    e.preventDefault();\n    const COMMENTS_URL = \"https://striveschool-api.herokuapp.com/api/comments/\";\n    try {\n      const response = await fetch(COMMENTS_URL, {\n        method: \"POST\",\n        body: JSON.stringify(this.state.newComment),\n        headers: {\n          Authorization:\n            \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTUwNmRlY2RhMzE2MzAwMTVkNTEyM2YiLCJpYXQiOjE2MzI2NjA5NzIsImV4cCI6MTYzMzg3MDU3Mn0.vzSXzuRnbhUs7NjBPeeIiCBg6REuTwnoXE-R7Y-zU9Y\",\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      if (response.ok) {\n        alert(\"Comment added\");\n        this.setState({\n          newComment: {\n            comment: \"\",\n            rate: 0,\n            elementId: this.props.data.imdbID,\n          },\n        });\n      } else {\n        alert(\"An error has occurred\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  handleRadioChange = (rating) => {\n    let newComment = this.state.newComment;\n    newComment.rate = rating;\n    this.setState({ newComment });\n  };\n\n  handleCommentText = (e) => {\n    let newComment = this.state.newComment;\n    newComment.comment = e.currentTarget.value;\n    this.setState({ newComment });\n  };\n\n  render() {\n    return (\n      <Col className=\"mb-2\" key={this.props.data.imdbID}>\n        <img\n          className=\"img-fluid\"\n          src={this.props.data.Poster}\n          alt=\"movie\"\n          onClick={() => {\n            this.setState({ selected: !this.state.selected });\n            this.fetchComments(this.props.data.imdbID);\n          }}\n        />\n        <Modal\n          show={this.state.selected}\n          onHide={() => this.setState({ selected: !this.state.selected })}\n        >\n          <Modal.Header closeButton>\n            <Modal.Title>Movie comments</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <div className=\"my-3\">\n              {this.state.error && (\n                <Alert variant=\"danger\" className=\"text-center\">\n                  Error fetching comments\n                </Alert>\n              )}\n              {this.state.comments.length > 0 &&\n                this.state.comments[0].elementId === this.props.data.imdbID && (\n                  <CommentsList comments={this.state.comments} />\n                )}\n              <div className=\"text-center\">\n                <h5 className=\"my-3\">Add a comment</h5>\n                <Form onSubmit={this.submitComment}>\n                  <div className=\"my-3 text-center\">\n                    <Form.Check\n                      inline\n                      label=\"1\"\n                      value=\"1\"\n                      type=\"radio\"\n                      name=\"rating\"\n                      defaultChecked={this.state.newComment.rate === \"1\"}\n                      onClick={() => this.handleRadioChange(\"1\")}\n                    />\n                    <Form.Check\n                      inline\n                      label=\"2\"\n                      value=\"2\"\n                      type=\"radio\"\n                      name=\"rating\"\n                      defaultChecked={this.state.newComment.rate === \"2\"}\n                      onClick={() => this.handleRadioChange(\"2\")}\n                    />\n                    <Form.Check\n                      inline\n                      label=\"3\"\n                      value=\"3\"\n                      type=\"radio\"\n                      name=\"rating\"\n                      defaultChecked={this.state.newComment.rate === \"3\"}\n                      onClick={() => this.handleRadioChange(\"3\")}\n                    />\n                    <Form.Check\n                      inline\n                      label=\"4\"\n                      value=\"4\"\n                      type=\"radio\"\n                      name=\"rating\"\n                      defaultChecked={this.state.newComment.rate === \"4\"}\n                      onClick={() => this.handleRadioChange(\"4\")}\n                    />\n                    <Form.Check\n                      inline\n                      label=\"5\"\n                      value=\"5\"\n                      type=\"radio\"\n                      name=\"rating\"\n                      defaultChecked={this.state.newComment.rate === \"5\"}\n                      onClick={() => this.handleRadioChange(\"5\")}\n                    />\n                  </div>\n                  <InputGroup className=\"mb-3\">\n                    <FormControl\n                      placeholder=\"Write your comment\"\n                      aria-label=\"comment\"\n                      aria-describedby=\"basic-addon1\"\n                      onChange={this.handleCommentText}\n                      value={this.state.newComment.comment}\n                      required\n                    />\n                  </InputGroup>\n                  <Button variant=\"primary\" type=\"submit\">\n                    Submit\n                  </Button>\n                </Form>\n              </div>\n            </div>\n          </Modal.Body>\n        </Modal>\n      </Col>\n    );\n  }\n}\n\nexport default SingleMovie;\n"]},"metadata":{},"sourceType":"module"}